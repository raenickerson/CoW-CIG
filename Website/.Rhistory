group_by(species_id, cam_id) %>%
ggplot(aes(x=species_id, y=num_individ_pics)) +
geom_bar(stat = "identity", fill = "cyan") +
facet_wrap(~ cam_id) +
labs(y = "Total Number of Individuals", x = "Predator Species") +
ggtitle("Predator Presence at Camera X") +
theme_bw() +
theme(legend.position = "bottom")
plot
plot <- S_O %>%
select(species_id, cam_id, num_individ_pics) %>%
filter(cam_id %in% c("7196-12","7196-5", "7196-12",
"4186-13", "4186-17", "7196-11",
"4186-20", "9164", "7196-2",
"7196-4", "7196-6")) %>%
filter(species_id %in% c("Cougar", "Black Bear", "Lynx", "Coyote")) %>%
group_by(species_id, cam_id) %>%
ggplot(aes(x=species_id, y=num_individ_pics)) +
geom_bar(stat = "identity", fill = "cyan") +
facet_wrap(~ cam_id, nrow = 2) +
labs(y = "Total Number of Individuals", x = "Predator Species") +
ggtitle("Predator Presence at Camera X") +
theme_bw() +
theme(legend.position = "bottom")
plot
plot <- S_O %>%
select(species_id, cam_id, num_individ_pics) %>%
filter(cam_id %in% c("7196-12","7196-5", "7196-12",
"4186-13", "4186-17", "7196-11",
"4186-20", "9164", "7196-2",
"7196-4", "7196-6")) %>%
filter(species_id %in% c("Cougar", "Black Bear", "Lynx", "Coyote")) %>%
group_by(species_id, cam_id) %>%
ggplot(aes(x=species_id, y=num_individ_pics)) +
geom_bar(stat = "identity", fill = "cyan") +
facet_wrap(~ cam_id, nrow = 2) +
labs(y = "Total Number of Individuals", x = "Predator Species") +
ggtitle("Predator Presence at Camera X") +
theme_bw() +
theme(legend.position = "bottom")
library(tidyverse)
plot <- S_O %>%
select(species_id, cam_id, num_individ_pics) %>%
filter(cam_id %in% c("7196-12","7196-5", "7196-12",
"4186-13", "4186-17", "7196-11",
"4186-20", "9164", "7196-2",
"7196-4", "7196-6")) %>%
filter(species_id %in% c("Cougar", "Black Bear", "Lynx", "Coyote")) %>%
group_by(species_id, cam_id) %>%
ggplot(aes(x=species_id, y=num_individ_pics)) +
geom_bar(stat = "identity", fill = "cyan") +
facet_wrap(~ cam_id, nrow = 2) +
labs(y = "Total Number of Individuals", x = "Predator Species") +
ggtitle("Predator Presence at Camera X") +
theme_bw() +
theme(legend.position = "bottom")
plot
library(DBI)
library(RSQLite)
library(ggplot2)
library(tidyverse)
library(dplyr)
dbExecute(cow_cig_db, "CREATE TABLE cameras (
deploy_id integer PRIMARY KEY AUTOINCREMENT,
camera_id varchar(10),
ranch_id varchar(10),
station_id varchar(5),
date_deploy text,
person_deploy varchar(10) CHECK (person_deploy IN ('Rae', 'tech1', 'tech2')),
date_pull text,
person_remove varchar(10) CHECK (person_remove IN ('Rae', 'tech1', 'tech2')),
lat double,
long double,
pasture_id varchar(10),
dist_target_m char(3),
height_f char(3),
width char(3),
cover_percent char(20),
direction varchar(20) CHECK (direction IN ('N', 'S', 'E', 'W', 'NW',
'NE', 'SW', 'SE')),
habitat varchar(20),
lock char(1),
S_B_date text,
date_check text,
person_check text CHECK (person_check IN ('Rae', 'tech1', 'tech2')),
total_pics char(20),
pics_delete char(20),
date_dead text,
date_full text,
FOREIGN KEY (ranch_id) REFERENCES ranches(ranch_id),
FOREIGN KEY (camera_id) REFERENCES cameras(camera_id),
FOREIGN KEY (person_deploy) REFERENCES cameras(person_deployed),
FOREIGN KEY (pasture_id) REFERENCES pastures(pasture_id),
FOREIGN KEY (person_remove) REFERENCES cameras(person_removed)
);")
dbExecute(cow_cig_db, "CREATE TABLE WA_DM_F (
photo_id integer PRIMARY KEY AUTOINCREMENT,
date_pic text,
cam_model varchar(10),
cam_id varchar(10),
station_id varchar(10),
species_id varchar(20),
num char(20),
num_individ_pics char(20)
);")
dbExecute(cow_cig_db, "CREATE TABLE WA_DM_F (
photo_id integer PRIMARY KEY AUTOINCREMENT,
date_pic text,
cam_model varchar(10),
cam_id varchar(10),
station_id varchar(10),
species_id varchar(20),
num char(20),
num_individ_pics char(20)
);")
cow_cig_db <- dbConnect(RSQLite::SQLite(),
"CoW_CIG.db")
```{r cameras-table, eval = FALSE, echo = TRUE}
plot1 <- S_O %>%
select(species_id, cam_id, num_individ_pics) %>%
filter(cam_id %in% c("7196-12","7196-5", "7196-12", "4186-13")) %>%
filter(species_id %in% c("Cougar", "Black Bear", "Lynx", "Coyote")) %>%
group_by(species_id, cam_id) %>%
ggplot(aes(x=species_id, y=num_individ_pics)) +
geom_bar(stat = "identity", fill = "cyan") +
facet_wrap(~ cam_id, nrow = 2) +
labs(y = "Total Number of Individuals", x = "Predator Species") +
ggtitle("Predator Presence at Camera X") +
theme_bw() +
theme(legend.position = "bottom")
plot1
plot2 <- S_O %>%
select(species_id, cam_id, num_individ_pics) %>%
filter(cam_id %in% c("4186-17", "7196-11", "4186-20", "9164")) %>%
filter(species_id %in% c("Cougar", "Black Bear", "Lynx", "Coyote")) %>%
group_by(species_id, cam_id) %>%
ggplot(aes(x=species_id, y=num_individ_pics)) +
geom_bar(stat = "identity", fill = "cyan") +
facet_wrap(~ cam_id, nrow = 2) +
labs(y = "Total Number of Individuals", x = "Predator Species") +
ggtitle("Predator Presence at Camera X") +
theme_bw() +
theme(legend.position = "bottom")
plot2
plot3 <- S_O %>%
select(species_id, cam_id, num_individ_pics) %>%
filter(cam_id %in% c("7196-2", "7196-4", "7196-6")) %>%
filter(species_id %in% c("Cougar", "Black Bear", "Lynx", "Coyote")) %>%
group_by(species_id, cam_id) %>%
ggplot(aes(x=species_id, y=num_individ_pics)) +
geom_bar(stat = "identity", fill = "cyan") +
facet_wrap(~ cam_id, nrow = 2) +
labs(y = "Total Number of Individuals", x = "Predator Species") +
ggtitle("Predator Presence at Camera X") +
theme_bw() +
theme(legend.position = "bottom")
plot3
plot3 <- S_O %>%
select(species_id, cam_id, num_individ_pics) %>%
filter(cam_id %in% c("7196-2", "7196-4", "7196-6")) %>%
filter(species_id %in% c("Cougar", "Black Bear", "Lynx", "Coyote")) %>%
group_by(species_id, cam_id) %>%
ggplot(aes(x=species_id, y=num_individ_pics)) +
geom_bar(stat = "identity", fill = "cyan") +
facet_wrap(~ cam_id, nrow = 1) +
labs(y = "Total Number of Individuals", x = "Predator Species") +
ggtitle("Predator Presence at Camera X") +
theme_bw() +
theme(legend.position = "bottom")
plot3
plot3 <- S_O %>%
select(species_id, cam_id, num_individ_pics) %>%
filter(cam_id %in% c("7196-2", "7196-4", "7196-6")) %>%
filter(species_id %in% c("Cougar", "Black Bear", "Lynx", "Coyote")) %>%
group_by(species_id, cam_id) %>%
ggplot(aes(x=species_id, y=num_individ_pics)) +
geom_bar(stat = "identity", fill = "cyan") +
facet_wrap(~ cam_id, nrow = 1) +
labs(y = "Total Number of Individuals", x = "Predator Species") +
ggtitle("Predator Presence at Camera X") +
theme_bw() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
theme(legend.position = "bottom")
plot3
plot3 <- S_O %>%
select(species_id, cam_id, num_individ_pics) %>%
filter(cam_id %in% c("7196-2", "7196-4", "7196-6")) %>%
filter(species_id %in% c("Cougar", "Black Bear", "Lynx", "Coyote")) %>%
group_by(species_id, cam_id) %>%
ggplot(aes(x=species_id, y=num_individ_pics)) +
geom_bar(stat = "identity", fill = "cyan") +
facet_wrap(~ cam_id, nrow = 1) +
labs(y = "Total Number of Individuals", x = "Predator Species") +
ggtitle("Predator Presence at Washington Camera Location") +
theme_bw() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
theme(legend.position = "bottom")
plot3
plot3 <- S_O %>%
select(species_id, cam_id, num_individ_pics) %>%
filter(cam_id %in% c("7196-2", "7196-4", "7196-6")) %>%
filter(species_id %in% c("Cougar", "Black Bear", "Lynx", "Coyote")) %>%
group_by(species_id, cam_id) %>%
ggplot(aes(x=species_id, y=num_individ_pics)) +
geom_bar(stat = "identity", fill = "cyan") +
facet_wrap(~ cam_id, nrow = 1) +
labs(y = "Total Number of Individuals", x = "Predator Species") +
ggtitle("Predator Presence at Washington Camera Locations") +
theme_bw() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
theme(legend.position = "bottom")
plot3
plot1 <- S_O %>%
select(species_id, cam_id, num_individ_pics) %>%
filter(cam_id %in% c("7196-12","7196-5", "7196-12", "4186-13")) %>%
filter(species_id %in% c("Cougar", "Black Bear", "Lynx", "Coyote")) %>%
group_by(species_id, cam_id) %>%
ggplot(aes(x=species_id, y=num_individ_pics)) +
geom_bar(stat = "identity", fill = "cyan") +
facet_wrap(~ cam_id, nrow = 1) +
labs(y = "Total Number of Individuals", x = "Predator Species") +
ggtitle("Predator Presence at Washington Camera Locations") +
theme_bw() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
theme(legend.position = "bottom")
plot1
plot1 <- S_O %>%
select(species_id, cam_id, num_individ_pics) %>%
filter(cam_id %in% c("7196-12","7196-5", "7196-12", "4186-13")) %>%
filter(species_id %in% c("Cougar", "Black Bear", "Lynx", "Coyote")) %>%
group_by(species_id, cam_id) %>%
ggplot(aes(x=species_id, y=num_individ_pics)) +
geom_bar(stat = "identity", fill = "cyan") +
facet_wrap(~ cam_id, nrow = 2) +
labs(y = "Total Number of Individuals", x = "Predator Species") +
ggtitle("Predator Presence at Washington Camera Locations") +
theme_bw() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
theme(legend.position = "bottom")
plot1
plot1 <- S_O %>%
select(species_id, cam_id, num_individ_pics) %>%
filter(cam_id %in% c("7196-12","7196-5", "7196-12", "4186-13")) %>%
filter(species_id %in% c("Cougar", "Black Bear", "Lynx", "Coyote")) %>%
group_by(species_id, cam_id) %>%
ggplot(aes(x=species_id, y=num_individ_pics)) +
geom_bar(stat = "identity", fill = "cyan") +
facet_wrap(~ cam_id, nrow = 1) +
labs(y = "Total Number of Individuals", x = "Predator Species") +
ggtitle("Predator Presence at Washington Camera Locations") +
theme_bw() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
theme(legend.position = "bottom")
plot1
plot2 <- S_O %>%
select(species_id, cam_id, num_individ_pics) %>%
filter(cam_id %in% c("4186-17", "7196-11", "4186-20", "9164")) %>%
filter(species_id %in% c("Cougar", "Black Bear", "Lynx", "Coyote")) %>%
group_by(species_id, cam_id) %>%
ggplot(aes(x=species_id, y=num_individ_pics)) +
geom_bar(stat = "identity", fill = "cyan") +
facet_wrap(~ cam_id, nrow = 1) +
labs(y = "Total Number of Individuals", x = "Predator Species") +
ggtitle("Predator Presence at Washington Camera Locations") +
theme_bw() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
theme(legend.position = "bottom")
plot2
plot3 <- S_O %>%
select(species_id, cam_id, num_individ_pics) %>%
filter(cam_id %in% c("7196-2", "7196-4", "7196-6")) %>%
filter(species_id %in% c("Cougar", "Black Bear", "Lynx", "Coyote")) %>%
group_by(species_id, cam_id) %>%
ggplot(aes(x=species_id, y=num_individ_pics)) +
geom_bar(stat = "identity", fill = "cyan") +
facet_wrap(~ cam_id, nrow = 1) +
labs(y = "Total Number of Individuals", x = "Predator Species") +
ggtitle("Predator Presence at Washington Camera Locations") +
theme_bw() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
theme(legend.position = "bottom")
plot3
library(DBI)
library(RSQLite)
library(ggplot2)
library(tidyverse)
library(dplyr)
setwd("/Users/rachaelnickerson/Desktop/CIG/Analysis/Website")
cow_cig_db <- dbConnect(RSQLite::SQLite(),
"CoW_CIG.db")
dbExecute(cow_cig_db, "CREATE TABLE cameras (
deploy_id integer PRIMARY KEY AUTOINCREMENT,
camera_id varchar(10),
ranch_id varchar(10),
station_id varchar(5),
date_deploy text,
person_deploy varchar(10) CHECK (person_deploy IN ('Rae', 'tech1', 'tech2')),
date_pull text,
person_remove varchar(10) CHECK (person_remove IN ('Rae', 'tech1', 'tech2')),
lat double,
long double,
pasture_id varchar(10),
dist_target_m char(3),
height_f char(3),
width char(3),
cover_percent char(20),
direction varchar(20) CHECK (direction IN ('N', 'S', 'E', 'W', 'NW',
'NE', 'SW', 'SE')),
habitat varchar(20),
lock char(1),
S_B_date text,
date_check text,
person_check text CHECK (person_check IN ('Rae', 'tech1', 'tech2')),
total_pics char(20),
pics_delete char(20),
date_dead text,
date_full text,
FOREIGN KEY (ranch_id) REFERENCES ranches(ranch_id),
FOREIGN KEY (camera_id) REFERENCES cameras(camera_id),
FOREIGN KEY (person_deploy) REFERENCES cameras(person_deployed),
FOREIGN KEY (pasture_id) REFERENCES pastures(pasture_id),
FOREIGN KEY (person_remove) REFERENCES cameras(person_removed)
);")
dbExecute(cow_cig_db, "CREATE TABLE photos (
photo_id integer PRIMARY KEY AUTOINCREMENT,
ranch_id varchar(20),
camera_id varchar(10),
date text,
observer_id varchar(10) CHECK (observer_id IN ('Rae', 'tech1', 'tech2')),
weather_id varchar(10),
temp char(3),
time char(4),
lat double,
long double,
species_id varchar(10),
pred_num char(3),
num_other char(3),
num_calves char(3),
num_bulls char(3),
num_cows char(3),
num_cattle char(3),
event char(5),
event_start char(4),
event_end char(4),
eat_up_bulls char(3),
eat_up_cows char(3),
eat_up_calves char(3),
eat_down_bulls char(3),
eat_down_cows char(3),
eat_down_calves char(3),
stand_up_bulls char(3),
stand_up_cows char(3),
stand_up_calves char(3),
stand_down_bulls char(3),
stand_down_cows char(3),
stand_down_calves char(3),
walk_up_bulls char(3),
walk_up_cows char(3),
walk_up_calves char(3),
walk_down_bulls char(3),
walk_down_cows char(3),
walk_down_calves char(3),
lying_bulls char(3),
lying_cows char(3),
lying_calves char(3),
running_bulls char(3),
running_cows char(3),
running_calves char(3),
other_bulls char(3),
other_cows char(3),
other_calves char(3),
dom_behav varchar(10),
FOREIGN KEY (ranch_id) REFERENCES ranches(ranch_id),
FOREIGN KEY (camera_id) REFERENCES cameras(camera_id),
FOREIGN KEY (observer_id) REFERENCES cameras(observer_id),
FOREIGN KEY (species_id) REFERENCES photos(species_id),
FOREIGN KEY (num_calves) REFERENCES photos(num_calves),
FOREIGN KEY (num_cows) REFERENCES photos(num_cows),
FOREIGN KEY (num_bulls) REFERENCES photos(num_bulls),
FOREIGN KEY (num_other) REFERENCES photos(num_other),
FOREIGN KEY (num_cattle) REFERENCES photos(num_cattle),
FOREIGN KEY (pred_num) REFERENCES photos(pred_num)
);")
dbExecute(cow_cig_db, "CREATE TABLE WA_DM_F (
photo_id integer PRIMARY KEY AUTOINCREMENT,
date_pic text,
cam_model varchar(10),
cam_id varchar(10),
station_id varchar(10),
species_id varchar(20),
num char(20),
num_individ_pics char(20)
);")
WAP <- read.csv("WA_DM_Final.csv", na = "NA")
library(DBI)
library(RSQLite)
library(ggplot2)
library(tidyverse)
library(DBI)
library(RSQLite)
library(ggplot2)
library(tidyverse)
library(dplyr)
# species occurrence table
S_O <- WAP %>%
select(date_pic, cam_id, station_id, species_id, num_individ_pics)
WAP <- dbGetQuery(cow_cig_db, "SELECT * FROM WA_DM_F;")
library(lubridate)
S_O <- S_O %>%
mutate(date_pic = ymd(date_pic))
class(S_O$date_pic)
library(lubridate)
S_O <- S_O %>%
mutate(date_pic = ymd(date_pic))
class(S_O$date_pic)
class(S_O$cam_id)
class(S_O$station_id)
class(S_O$species_id)
class(S_O$num_individ_pics)
S_O$station_id <- as.factor(S_O$station_id)
S_O$cam_id <- as.factor(S_O$cam_id)
S_O$species_id <- as.factor(S_O$species_id)
S_O$station_id <- as.factor(S_O$station_id)
S_O$cam_id <- as.factor(S_O$cam_id)
S_O$species_id <- as.factor(S_O$species_id)
class(S_O$station_id)
class(S_O$species_id)
class(S_O$cam_id)
S_O %>%
pull(species_id) %>%
unique()
S_O$species_id <- as.character(S_O$species_id)
S_O <- S_O %>%
mutate(species_id = if_else(species_id == "mountain lion", "Cougar", species_id)) %>%
mutate(species_id = if_else(species_id == "Mountain Lion", "Cougar", species_id)) %>%
mutate(species_id = if_else(species_id == "lion", "Cougar", species_id)) %>%
mutate(species_id = if_else(species_id == "COYOTE", "Coyote", species_id)) %>%
mutate(species_id = if_else(species_id == "coyote", "Coyote", species_id)) %>%
mutate(species_id = if_else(species_id == "BB", "Black Bear", species_id))
S_O$species_id <- as.factor(S_O$species_id)
S_O %>%
pull(species_id) %>%
unique()
S_O %>%
pull(cam_id) %>%
unique()
S_O %>%
pull(num_individ_pics) %>%
unique()
S_O <- S_O %>%
filter(!is.na(num_individ_pics))
plot1 <- S_O %>%
select(species_id, cam_id, num_individ_pics) %>%
filter(cam_id %in% c("7196-12","7196-5", "7196-12", "4186-13")) %>%
filter(species_id %in% c("Cougar", "Black Bear", "Lynx", "Coyote")) %>%
group_by(species_id, cam_id) %>%
ggplot(aes(x=species_id, y=num_individ_pics)) +
geom_bar(stat = "identity", fill = "cyan") +
facet_wrap(~ cam_id, nrow = 1) +
labs(y = "Total Number of Individuals", x = "Predator Species") +
ggtitle("Predator Presence at Washington Camera Locations") +
theme_bw() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
theme(legend.position = "bottom")
plot1
plot2 <- S_O %>%
select(species_id, cam_id, num_individ_pics) %>%
filter(cam_id %in% c("4186-17", "7196-11", "4186-20", "9164")) %>%
filter(species_id %in% c("Cougar", "Black Bear", "Lynx", "Coyote")) %>%
group_by(species_id, cam_id) %>%
ggplot(aes(x=species_id, y=num_individ_pics)) +
geom_bar(stat = "identity", fill = "cyan") +
facet_wrap(~ cam_id, nrow = 1) +
labs(y = "Total Number of Individuals", x = "Predator Species") +
ggtitle("Predator Presence at Washington Camera Locations") +
theme_bw() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
theme(legend.position = "bottom")
plot2
plot3 <- S_O %>%
select(species_id, cam_id, num_individ_pics) %>%
filter(cam_id %in% c("7196-2", "7196-4", "7196-6")) %>%
filter(species_id %in% c("Cougar", "Black Bear", "Lynx", "Coyote")) %>%
group_by(species_id, cam_id) %>%
ggplot(aes(x=species_id, y=num_individ_pics)) +
geom_bar(stat = "identity", fill = "cyan") +
facet_wrap(~ cam_id, nrow = 1) +
labs(y = "Total Number of Individuals", x = "Predator Species") +
ggtitle("Predator Presence at Washington Camera Locations") +
theme_bw() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
theme(legend.position = "bottom")
plot3
S_O %>%
pull(num_individ_pics) %>%
unique()
library(DBI)
library(RSQLite)
library(ggplot2)
library(tidyverse)
library(dplyr)
library(lubridate)
library(conflicted)
library(DBI)
library(RSQLite)
library(conflicted)
library(DBI)
library(RSQLite)
library(ggplot2)
library(tidyverse)
library(dplyr)
library(lubridate)
