<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Brining in, and cleaning my data | My semester project website</title>
  <meta name="description" content="<p>This will be my end of semester project webpage showing the progress on my
organizing of my data for the CoW-CIG.</p>" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Brining in, and cleaning my data | My semester project website" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This will be my end of semester project webpage showing the progress on my
organizing of my data for the CoW-CIG.</p>" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Brining in, and cleaning my data | My semester project website" />
  
  <meta name="twitter:description" content="<p>This will be my end of semester project webpage showing the progress on my
organizing of my data for the CoW-CIG.</p>" />
  

<meta name="author" content="Rae Nickerson" />


<meta name="date" content="2023-04-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="creating-my-database.html"/>
<link rel="next" href="visualizing-the-data.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About</a></li>
<li class="chapter" data-level="2" data-path="creating-my-database.html"><a href="creating-my-database.html"><i class="fa fa-check"></i><b>2</b> Creating My Database</a>
<ul>
<li class="chapter" data-level="" data-path="creating-my-database.html"><a href="creating-my-database.html#starting-the-databse"><i class="fa fa-check"></i>Starting the Databse</a></li>
<li class="chapter" data-level="" data-path="creating-my-database.html"><a href="creating-my-database.html#creating-the-database-connection-to-my-sqlite-database"><i class="fa fa-check"></i>Creating the database connection to my SQLite database</a></li>
<li class="chapter" data-level="2.1" data-path="creating-my-database.html"><a href="creating-my-database.html#creating-the-cameras-table"><i class="fa fa-check"></i><b>2.1</b> Creating the cameras table</a></li>
<li class="chapter" data-level="2.2" data-path="creating-my-database.html"><a href="creating-my-database.html#creating-the-photos-table"><i class="fa fa-check"></i><b>2.2</b> Creating the photos table</a></li>
<li class="chapter" data-level="2.3" data-path="creating-my-database.html"><a href="creating-my-database.html#creating-the-wa_dm-table-pilot-data"><i class="fa fa-check"></i><b>2.3</b> Creating the WA_DM table (pilot data)</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="brining-in-and-cleaning-my-data.html"><a href="brining-in-and-cleaning-my-data.html"><i class="fa fa-check"></i><b>3</b> Brining in, and cleaning my data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="brining-in-and-cleaning-my-data.html"><a href="brining-in-and-cleaning-my-data.html#brining-in-the-pilot-data"><i class="fa fa-check"></i><b>3.1</b> Brining in the pilot data</a></li>
<li class="chapter" data-level="3.2" data-path="brining-in-and-cleaning-my-data.html"><a href="brining-in-and-cleaning-my-data.html#cleaning-the-data"><i class="fa fa-check"></i><b>3.2</b> Cleaning the data</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="visualizing-the-data.html"><a href="visualizing-the-data.html"><i class="fa fa-check"></i><b>4</b> Visualizing the data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="visualizing-the-data.html"><a href="visualizing-the-data.html#the-end-thanks-for-a-wonderful-class-simona-probably-the-most-helpful-graduate-course-ive-ever-taken.-good-luck-in-idaho-we-will-miss-you."><i class="fa fa-check"></i><b>4.1</b> THE END! Thanks for a wonderful class, Simona, probably the most helpful graduate course I’ve ever taken. Good luck in Idaho! We will miss you.</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">My semester project website</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="brining-in-and-cleaning-my-data" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Brining in, and cleaning my data<a href="brining-in-and-cleaning-my-data.html#brining-in-and-cleaning-my-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Since my pilot data did not focus on cattle behavioral analysis, there will be little to no data on cows. Instead, I will focus on cleaning my data for visualizing wild species presence across camera sites.</p>
<p>This pilot was in eastern Washington (just outside Colville) and focused on comparing cameras placed at the center of each camera grid cell to those placed on roads, trails, or other sites where we would expect to see more wildlife use - with a focus on capturing wolf presence.</p>
<div id="brining-in-the-pilot-data" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Brining in the pilot data<a href="brining-in-and-cleaning-my-data.html#brining-in-the-pilot-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<pre class="data"><code>WAP &lt;- dbGetQuery(cow_cig_db, &quot;SELECT * FROM WA_DM_F;&quot;)</code></pre>
<p>Alternative way to bring in the data:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="brining-in-and-cleaning-my-data.html#cb10-1" aria-hidden="true" tabindex="-1"></a>WAP <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;WA_DM_Final.csv&quot;</span>, <span class="at">na =</span> <span class="st">&quot;NA&quot;</span>)</span></code></pre></div>
</div>
<div id="cleaning-the-data" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Cleaning the data<a href="brining-in-and-cleaning-my-data.html#cleaning-the-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For some reason, R is reading in my csv file to have 99+ variables. So first I will remove all unneeded columns to just have the data collected, focusing on what might be useful later for data visulization.</p>
<pre class="data"><code># species occurrence table
S_O &lt;- WAP %&gt;% 
  select(date_pic, cam_id, station_id, species_id, num_individ_pics)</code></pre>
<p>Notice that I selected the “num_individ_pics” column over the “num” column. This is because the “num_individ_pics” column show the number of individuals of a certain species per photo. For ranchers worried about predator pesence, knowing how many animals are around is important.</p>
<p>Now let’s make sure our date column is being read correctly by R using Lubridate</p>
<pre class="date"><code>library(lubridate)

S_O &lt;- S_O %&gt;% 
  mutate(date_pic = ymd(date_pic))
class(S_O$date_pic)</code></pre>
<p>Next, let’s make sure all NA’s, UNKNONWS, and ?s are set to NA, and make sure our columns are the correct data class</p>
<p>First, let’s check the class for each column (except date_pic which we’ve already dealt with)</p>
<pre class="class"><code>class(S_O$cam_id)
class(S_O$station_id)
class(S_O$species_id)
class(S_O$num_individ_pics)</code></pre>
<p>Our num_individ_pics is the integar class, which is good, but our other variables need to be switched to as.factor so that we can categorize by cam_id, station_id, and species_id.</p>
<pre class="slice"><code>S_O$station_id &lt;- as.factor(S_O$station_id)
S_O$cam_id &lt;- as.factor(S_O$cam_id)
S_O$species_id &lt;- as.factor(S_O$species_id)</code></pre>
<p>Now, let’s check that it worked</p>
<pre class="check"><code>class(S_O$station_id)
class(S_O$species_id)
class(S_O$cam_id)</code></pre>
<p>Next, let’s standardize all the different ways that species were written using tidyverse.</p>
<pre class="preds"><code>S_O %&gt;% 
  pull(species_id) %&gt;% 
  unique()</code></pre>
<p>As you can see, we have a bit of a mess here. So the first thing we want to do is separate the information we need from the information we don’t. For example, we are only going to look at predator presence, so all other categories can be ignored (we will select for only predators later). But, we need to set all versions of predators to consistent naming - which includes BB (black bear), Lynx, coyote, Coyote, COYOTE, mountain lion, and Mountain Lion.</p>
<p>First, will need to convert back to character, then set standard naming</p>
<pre class="standard"><code>S_O$species_id &lt;- as.character(S_O$species_id)

S_O &lt;- S_O %&gt;% 
  mutate(species_id = if_else(species_id == &quot;mountain lion&quot;, &quot;Cougar&quot;, species_id)) %&gt;% 
  mutate(species_id = if_else(species_id == &quot;Mountain Lion&quot;, &quot;Cougar&quot;, species_id)) %&gt;% 
  mutate(species_id = if_else(species_id == &quot;lion&quot;, &quot;Cougar&quot;, species_id)) %&gt;% 
  mutate(species_id = if_else(species_id == &quot;COYOTE&quot;, &quot;Coyote&quot;, species_id)) %&gt;% 
  mutate(species_id = if_else(species_id == &quot;coyote&quot;, &quot;Coyote&quot;, species_id)) %&gt;% 
  mutate(species_id = if_else(species_id == &quot;BB&quot;, &quot;Black Bear&quot;, species_id))</code></pre>
<p>Now let’s change it back to factor, and check that it worked.</p>
<p>```{preds-check, eval = TRUE, echo = TRUE}
S_O<span class="math inline">\(species_id &lt;- as.factor(S_O\)</span>species_id)</p>
<p>S_O %&gt;%
pull(species_id) %&gt;%
unique()</p>
<pre><code>Excellent!

Now, let&#39;s check for distinct values in our other columns just to make sure there are no errors - specifically cam_id and num_individ_pics since we will be using those columns to visualize our predator presence across camera sites. 

```distinct
S_O %&gt;% 
  pull(cam_id) %&gt;% 
  unique()</code></pre>
<p>Looks like we have 12 different cameras, which means our other 8 cameras did not get photos of any animals at all (sad)</p>
<p>Let’s do the same for the num_individ_pics columns</p>
<pre class="second"><code>S_O %&gt;% 
  pull(num_individ_pics) %&gt;% 
  unique()</code></pre>
<p>Looks like we have some NA values. To simplify our analysis, I’m going to remove any rows/values/observations with NA as the response.</p>
<pre class="na"><code>S_O &lt;- S_O %&gt;%
  filter(!is.na(num_individ_pics))</code></pre>
<p>Great! Now our data is clean enough to start plotting - we have our predator species categorized cleanly into four species - Lynx, Cougar, Black Bear, and Coyote, our columns no longer contain missing data, and are the correct class.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="creating-my-database.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="visualizing-the-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/02-cross-refs.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
